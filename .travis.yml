language: go
go:
- 1.x
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: lJDEeXJq8heE7DRHP1RzWXongCjYMTakNPwTjqNP8te9kLRp+tJ31JZplB9FOZb2ZsaaFWfJ97P+d64SJIuzhLI7SFdkanZe3pvBBqhdqhGjG4hH7eVG7ll4mkhlLIbMsXdl/CxQ3nWW3jBhLUDeprfp5sC4oWRMXUto/BE7LVdR41KT5i43wofzNQa411HB2jkpdPND4A/fYLGuDO3oKC4IklExmpchcXVLo3RaSL3cT8X9usAiNOvM8WoGs5T9QSwUnxqKumr+Kr9vVtQ91V03AtpT3pEpUwTqaLeZ9OLF9Qb7rTlfjjaBRB4SME+BWGMc9b+YXGMT77bMDtQYRbYukZ1GCcsSFGNcChkCWPaajD/fhcy9puatj6YbITjsxhfMtlmzI43TCNlipMfDgqc8wtmJz/W79O+mpP9iMgS/4IHqNCBA6GmH8Okrzqh6bVrZK47QvjILdFYpculIFoNlJLqUDM6GnTpjw/SdrKeQdMn2PrqQFg/o9Gjv73iSdCFSyhtMHNr9PfomBYv6tz1z9E4tVbVJzqqN1MFr+3bJThSb8FpwKG1YD3Din5bQihSmhbXZxy0trC1mAd9/y5iDKced8rP0WYFZ2SdhXuqm3iPpnDGi84+6G604MvpNk4KFjdh2tWOv2H180ndvzaPDWHlTcwl/fZFc3k/rQPM=
  - secure: akVAzT+rtmtekVLQlVjyJMlCZlGynPIcojc/rSjmE+zq4PnltS0ScUu6WWkaoVpFN/G4ErSGQmMe31NS3TbWEngiqzyP2ND6kkGxyeKqhPaN+xxhY12BuXXxYM8QrvD6puJPhJ5DWxhaclgjtNH1f5S9STA1Q7EanNerY4VODpsUJs5HnISskUpZ/ZOMWIWlu+rOQmxSStgf9dUb1f5Au/vLcNjf/kH+gaHb5UcychH7DtrKfENP+qbuLy6AQfhdKIZ68zWC/UzlGgBtjYjxgmvof5TcrbjLIvELhBGvGM9BHpDqNpiI6GV5515mMLjgSHZj4V299roKmoklRxA5tCOANEvwcN3uudE4C09ouZeUyaHbuBiCiCs7cLIH0QDEz5owEjuedEoNuBFK51nKF0aosN3l+3xbVeeNnyJiyD3JVwXYIu6Oftni3fEE7TITBOxWavmNT4rOXdpKwxbs2d8+q4Wzuu2LoFc5kA6nZ2ey22sQCTmJqbqfDi/xE5boSNPEcXHFVbSkbc2Fw/D/sMh9KYJo4vlYLUKDs3FmXkIzPV67CpnSmejIavCU1W8+O2R+bZ1DTMloimT2vYUUj7wvwbhxjcWABiuiX39ZPqhZQiCvRfQsvYfAqWdBGIiZjKsVYJP2KGf4YEQsexKLUDJFz09dyGEVFg9/R6lqkiU=
  - secure: KYpuuSaeCQ2Z4xXZxjFmxnBBeKzKRA978oLOHcSlB3jdOH4GfllIYQup5BA67s3PrT0o+QTHJrgwVVv4ZM0ByF67P0lZxDVtQ85geKp+sg1S1RgIyM0XmakzXth1U3NSJVMnpFopZBOzyPozCoIjqRWxiEo/tfZgNBjBW1LKnavjmyArJodeSBxp3t6VK2bG13l/bLohX6R9ISphI4Yi9zAIOy0uRqBefsdx+uuaCttg4HqJL7rHjfWaKKpZev3e+oeMp+1yXLMimYqUqUrJpHH2yu5N1E0XtqAgOzmHMQxAnAGyQJLMFJ+g8FyeFvIOQsu8gXk2rZycqsWipgSKnNv/kDobigBoE77JqEEvMa1ASXlD1pe8n1YUv9tbFN2NtfiEjbh21kOvSscX+yfhl2VBRQAZV2lmtkj7ZRNsaz1XKYfPv+0o/WwR1hFfqGVae7ZwHSnoCAQc6R2jjEugRpqvqH2AlHbIHxqHmr2GYuDov5cexRaBVQOSPUsmN95+/igCLBqo3r2JPAYnLZ4uQVBWaM5h5+9x/ccw53J+1dJ216p20ZI24cGUHM3+BBLtPkD9z4ZMD7hbMJmgBLkeRljFL1/Mi2G2U5LHEVRntiGPsHKbgHSxMsDCGquy98VRD62q7xqJunSQ+mzh2wL6pFrsCvjxFdO28sk7hZeMHbU=
script:
- ls -alh
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/screach
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f docker/Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
notifications:
  slack:
    secure: Ymy8M2MYLk+aWCeTKTVYn2k2XJeOLwr9exm+nFRVtd+MJUDueC3Ot7+QLYQmLZgONxMCJWJ/1dgEykwUz162MFWCvOFuxl/371vflmhGt38lYLstu59cUoRD1X5VB33dYusFJ4x2EJK5qXeNZRgt80lB8C5qVzUbbBs2baVyie65DPDbl71hPVJepEWboUBYgwnzT0qrdjEwGsn+3H7gOhbOa+SduTnhDqJ3HbzfDTWkZlOHcRjIZtdOpmvBo7rLsBnSDuNB3kYTDxVquVVZ1+r2tweKwuUxTYo3B8lNc6/EmMThU5GEIz3WTagse822XCfep+xVy0AM7m95V5BfBG53SzmPQDLeNdXfFi7/mHRehETgpMfvH+L9f8GOMJDY0xxuOyv7IzD2odWFtKCyI/FF8fBM7jW56w+1uW5qkGLO92fkaarLzonB0PAxjQbZufVTa4yv1UaZvMzpTRKsYGFmwZQsHRZJ5fxwZahn026FsQm2CEKC55Zihd0RnG+kcQRv4kE+Fx1bfM9pNdtu5ChlHSWUuOpUPYWz5NYf079/dl7Af1wx5GKT/w00gPGyP65W8dRD/9BTu7Ys0OEwOMGTivbUT/ufXEjoc3u6SgIpNNEPtR6Vml8DQRQwIXKGPJtJiatpovnTUuYNMn3O/SrM6/5PfJtV40Xz92D4l9Y=
