language: go
go:
- 1.x
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: yDRpmTa97Ab1kr6KwcN4AopKaiNkRON/BmySsWv6zzAZNbH8MVZ1rHMStR3vbh3bOnTGvj6fbx4iV2W8KmZioI7WGx0tndbtQi84CztqZ8VMUUgXxeG/j6EE+bMUfcU5C3MhS11jyjSbogTE6QXQ2ylsOBshCAJoojTMVDwfmX0NfB579ES4Zg3/koYLoPZJyEjvDgoIq4dMJsv+yZ2KEd/I6NqOAiW7LuzDvTNEWL8fYNqbsgFyJIeacS1IUn9u1FQR4CeaJoZ+6icrqMnBGaCmwvqTa2mALywKHbfdGLvIdONF3Lad9Y01PAcuZsjXZv5ZFiXTNbwWmQG+ai89k8WYqqXslQULzmzmCZQLnrNMjASSnM1l/59W4u3XwIcRSdnllX+W7VGcWit7vHuyfFvDgVgtbjFL1l1cC3aXNk9ZcMzDQvi63zydP+1isSE8x9uuIALpPKMtv8ctnDqxQSQyEXAuxwgRn2n3+pzjG5mI+Oir5IigsQj8Cg3DWNYFfI+7wvXaYMXHQ3UGz8Y36QFakK+Ie3+pl5apO1dkW4tBVnEGfpjvYGXT22ebrd+D/hXr3M0lYDPVtpkvjillLnmBLl59sDLC9dUQr7SI1M+vl1CnyKgVVbrH6iYYs2AEcw6fwh4WuX/7QXtMlNYd74QqUG6x4OekU6/MWwnPqbA=
  - secure: kjc/hvUW6PILAOkkboxqAUwQMu0DplI9TcIDdPyBzQe0Ys0gSBVjeTpzOZ7PwVM6aPKShKL+PC0J16NjpHHYui2j28ZSYZdGt/ysJaOe7V2p5XZncnK6c8K0hwlDDCTSC0NS0GS7163XOxzqdraMm3FB1NsitTEvZ150iL5gE8XA4cjKzx+zn7JJ0yFm6TAMQtaNd3DYQ/FZhBsOFkYHUtOQqhJ323o2WLKVM0x1zS+4QbSHcCRZf29Y30g4QjYcluq0eDwxqmdWvxamtrOkrUjMT5ePC2UG0bJKTogz7Erh4h8WRs9u5MZRsjdxe2Ps0/IvtU6e4WDXdWxdV3rVGCO7CPgkCB2uNfMgzJe/ZcMt17YocxYD0zvqd18RziMz+ZiFL/LGNzDmsJ79DrRkBPCyeNgu4ned6YC/+q+NLedoZB1D4OG1QryJz6sSCMwVZucE5VXVVMQTS6vlIkgub/Ktq1scmabsRZdLhFRICNSJZDXBn/ITTmXcyhXNcIvyg2AmzZf79mPE8W4w1RwbPa0R7jWKqzUBalg33RKzYpDAqTqEiNq8OYcjcZM3EhwoE5MS9fN1I2l69eWOcmFZXZLKNN7F5J46gpiQdz7CFmlv+iOS5F3/70p8GPNNUFeghjd1Xx+zPaeMG12MAeJY2ZGMbSPHF/OXPx3h81NcD60=
  - secure: xM7UYVjssvUDcBgqYROf3B2MwEX7nKUzb86nCIkNyC5pf+JKj6un5gvFb4YHYpAA0hoz3oIyApnuLxPt6LqgBiyXOqZAxaaW+cHQH6hYvkiFeR2rmrFkG6Rg3tX82BHclMthcgbtR7dQWXOSc4GfCSVwb5XOgVjsc77fHUQ/AybDqMuc8tNqnTQxZ7dx4z3vg0e51gdkO6c+Y5eCY+4XiDhvb6nSOhPMK5bSk+MsfvzwijbvWs4vseqyeXtXfKXQcb06zXJuhXGQEMTeKCSMmY53Q527SRJA06C1c5rmOjHsf77KTl+k4PAu+dKuIVGJkvSzZhijGQS5lti84lEObi2/3S60GgCg6zFJVR3se5Ibzn1JpDoOoiEHMEyvyqnG1mGClfet772yQF4VZIvjDuf8leckyOurWN88qOeTX5AvNcQhW5KhY9iW23VU8sSLrbwsKvxpI4W6f8gqLlCLEGTEsdITOqlfJn9rXwb+9mynzpx/tt+YzNd6GGDwN5rWK4qCNbeeVIBWAxuZCk7JlUbOqtyya+2VGNOtGsDBSBuqQqUgF9T792mhNo0pi/9507buT1JWHNd3jSqAIGSxAjd0deUKrOc4cjCROCTOzx2iYu2Up/uCxP/PL7iF72CD2UBjyfTRC/6slXCEQEWaQ40cCJa1U4si7PBnrDAC0XU=
  - secure: tbN68jhN7vApHvhDi8atfKNgonvk+FFVzvp8+kK+bEkxNDN4eBdhwnTP0tFbQ5fvu7jvU7iNsszcLjLjPvG4z/htSXnxx2KZl5F5GJ7xxpqXkG8A2tyW+6MX0T53F0yfYFNT2DqYiD8NQ8EK5f9tVTXT8I9M7ZpgbxwbO1DwJUrnHzIhLatn/h5zjlHTGMo0B4JBunvx1M/U8Beluj+5l+6VojWKx+GHJ+xNXT2Lg3wnmt86kyygCX21IdKprTMLAOdEjwr4svYFCTqe6OC9hUEkutxQfPSxW2Olwo/OJReNHn36S8kmR+d2uSjslBDZqygi102hVB00M0AZ5ZuXkEDBbBs03IU8S4Gg5FrcI7RfqtfJYreMBXdew1PxTum11TaXOnW6E1URioYqDIhijbetkOWyvYPK3vRsQ0ilNn+mddL5uIzKI1B5ZZ/qJlOi8A1CKxSiBRusePDmUj9DHD8Tnsxl8F2/W1NpFgEM/s0CVtjRKvkw2/ovQ+SHS3QIUez4+2quYuKDXmjOBjxWyrhIWkuDDgqXWmGov58J0QAGvSNrVHLPZ6ihYFocLuBDagtNbMJXeoUThSw0Un2TToVBrBtVPFTcEibb+kUPjq0gHr0HmVDIrWe32+0NbJ8j9bEvWe/ggw4SVVALGBjV94hahjZ4wRXO7mkkQizHP2A=
  - secure: hYz562WewBNrjBuhLfCNC+VX2VcB3hnhLUI7pdnAcSme6HZXKHK7JXIBXU5v0QP6qW2B1/8f1r3g87rFakBo8wsAq+OE92V3+ekHxP02CR8mcoJFMPQ+3vSruCp5r/xlztFoPw01tk+FDLu7juBa5KXNcylHtxo9qVmFhe89hyIbvk8i7ZO88TAwi9OPdxEszxujpNeiu9EOkM09JEHrq8J0Odo6Q4uQhaAtBJ07uFPR3NSn/ZYFJ1IXkzofaI6FXMTA6YLrO/t9h8M/LQIs9kqPekkt7RxHOxobXkBvYU8uDmAyDZxNm3xvMH6MfbqlAGf7qQcNcW7r9SLLig3I93ktm8X2AdQeohyRwd9+otrn+HH5bl8TmP1zQcoBrWLdIsmSQDjyE/cTUjKrx4TDyiu5L+0JZeyEjKrPAdr6Dt+Qz7FECpSJ6Em3foiLlzeg/33dEFB0rpw09Od+9tjiDq4NR40e+3syaWbWiIggNxiflTh3Lz6KWxGrYOsmA69xv34DaaxxhWsOUn17iuYL9A+hlvoEKtrzLaCinmh8uMKo3FJbWIi68e3S8rWs4jamwYgev53vXGep9hcfzfPZpiWRDmktF/g3L3vDTR7hykIQYivb2tUgyJfHAdMSERUC7g2yF2yLHRHlmjTiP2mQ3VfkDty+y1MJbEd6c1yEMDw=
  - secure: cl4d+/lxW17+Bjuo4Tv1pcZlRsyxVC3z4gf8eYLSKHzPlubKHZHPgC65TxyX6g3VK2ii0MEVabeIx+x8rKXHIML63a7sYBsIcWh+lr1ByL7notX6QpD5YyYmegho7sgtfwgWjL5U9cvGOi8pp/G/dAPjJ5wCiq9CkDvgDjkRI5413jv9UB1G8TJTk3Nj98/eYzL4+0nYpdKSiUxsCJjC1RnyrsPYPBpr4kuj7m+gxM34nmPhYwgb2zF6nu6GptcMCz2BjjGbYq22L+7S5oh/8tmNLFQDROQWDjA4D2Nh36f+jclAHQteoTsu3/ruU34PzpFfSfEonssvApD/PdVGSyRLvEf4YMP+49RFlszeVepFYV1VdLTqfLAEZe0IaFwVoBt3/Y0zyvzHjeVQ4dXXCnAPF3sozLXCe6VvphrBRnoV3KHPy5YZU9/4rkXApujG0/0ET2hYOO0CNfRGDKRoFaA6gMw1NU8OU5PD46Uh0jwLWiTzSe7ctCGVZ/B45jJCv88XNJtxiBUXZ7WfFEtF0lCnesTX10XI+8cJ/uF9496SlgUC8rfPoxSwPVVEMvJ8YcvAQH9RgifSIDgDLU7yyq48x5EGQRFxiAoQLPkWf57LL6DZaUqoC2NDephCE6Sza8I0ozB1L6IgL1gy367+hoJoUlFCGwyyK8/gXRj0w3Y=
script:
- ls -alh
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/screach
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f docker/Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
notifications:
  slack:
    secure: Ymy8M2MYLk+aWCeTKTVYn2k2XJeOLwr9exm+nFRVtd+MJUDueC3Ot7+QLYQmLZgONxMCJWJ/1dgEykwUz162MFWCvOFuxl/371vflmhGt38lYLstu59cUoRD1X5VB33dYusFJ4x2EJK5qXeNZRgt80lB8C5qVzUbbBs2baVyie65DPDbl71hPVJepEWboUBYgwnzT0qrdjEwGsn+3H7gOhbOa+SduTnhDqJ3HbzfDTWkZlOHcRjIZtdOpmvBo7rLsBnSDuNB3kYTDxVquVVZ1+r2tweKwuUxTYo3B8lNc6/EmMThU5GEIz3WTagse822XCfep+xVy0AM7m95V5BfBG53SzmPQDLeNdXfFi7/mHRehETgpMfvH+L9f8GOMJDY0xxuOyv7IzD2odWFtKCyI/FF8fBM7jW56w+1uW5qkGLO92fkaarLzonB0PAxjQbZufVTa4yv1UaZvMzpTRKsYGFmwZQsHRZJ5fxwZahn026FsQm2CEKC55Zihd0RnG+kcQRv4kE+Fx1bfM9pNdtu5ChlHSWUuOpUPYWz5NYf079/dl7Af1wx5GKT/w00gPGyP65W8dRD/9BTu7Ys0OEwOMGTivbUT/ufXEjoc3u6SgIpNNEPtR6Vml8DQRQwIXKGPJtJiatpovnTUuYNMn3O/SrM6/5PfJtV40Xz92D4l9Y=
